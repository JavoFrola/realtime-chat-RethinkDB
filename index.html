<!DOCTYPE html>
<html>
    <head>
        
    </head>
    <body>
        Messages Below:
        
        <ul class="messages">
            <!-- Messages will be inserted as li's here -->
        </ul>
        
        <br>
        
        <form>
            <input type="text" class=".message-input">
            <input type="submit" class=".message-btn">
        </form>
        
        
        <!-- Bring in JQuery -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <!-- Bring in Socket.io -->
        <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
        <script>
            $.get('/message/all', function(result) {
              var messages = "";
              result.map(function(obj) {
                messages += "<li>Someone said: " + obj.message + "</li>";
              });
              $('.messages').html(messages);
            });
        
        
            $('.message-btn').click(function() {
              var val = $('.message-input').val();
                $.post('/message/send', {message: message}, function(result) {
                  console.log(result);
                });
            })
            
            var socket = io.connect();
            socket.on('new_message', function(data) {
              data.map(function(d) {
                $('.messages').append('<li>'+d.new_val.message+'</li>');
              })
            });
        </script>
    </body>
</html>